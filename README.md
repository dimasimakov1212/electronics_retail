## Сеть по продаже электроники

Сеть представляет собой иерархическую структуру из 3 уровней:

- Завод
- Розничная сеть
- Индивидуальный предприниматель

Каждое звено сети ссылается только на одного поставщика оборудования 
(не обязательно предыдущего по иерархии). 
Важно отметить, что уровень иерархии определяется не названием звена, 
а отношением к остальным элементам сети, т.е. завод всегда находится на 0 уровне, 
у него нет поставщиков, он сам производит товары и является поставщиком другим звеньям.
Если розничная сеть относится напрямую к заводу, минуя остальные звенья - её уровень - 1.
Так же поставщиком может быть компания того же звена, что и покупатель.

Каждое звено сети обладает следующими элементами:
- Название;
- Контакты:
  - Email;
  - Страна;
  - Город;
  - Улица;
  - Номер дома;
- Продукты:
  - Название;
  - Модель;
  - Дата выхода продукта на рынок;
- Поставщик (предыдущий по иерархии объект сети);
- Задолженность перед поставщиком в денежном выражении с точностью до копеек;
- Дата создания (заполняется автоматически при создании).

### Используемый стэк

- python 3.11
- django 5.0
- djangorestframework 3.14.0
- PostgreSQL 16.1

### Админка

В стандартной админ-панели по адресу на локальном хосте http://127.0.0.1:8000/admin/ 
при выводе списка компаний добавлено:
- ссылка на «Поставщика»;
- фильтр по названию города;
- «admin action», очищающий задолженность перед поставщиком у выбранных объектов.

### Эндпоинты

С использованием DRF, создан набор представлений:
- CRUD для модели поставщика-покупателя 
  (при этом невозможно обновление через API поля «Задолженность перед поставщиком»);
- CRUD для модели пользователя

Добавлена возможность фильтрации объектов по определенной стране.

Права доступа к API настроены так, что только активные сотрудники имеют доступ к API.

### Создание базы данных

Выполнить команду
```commandline
sudo -i -u postgres psql
```
После входа в postgres создаем БД
```commandline
CREATE DATABASE electronics_retail;
```

### Интеграция с базой данных

Необходимо создать миграции
```commandline
python manage.py makemigrations
```

И далее применить миграции
```commandline
python manage.py migrate
```

### Запуск приложения на локальном хосте

Для запуска приложения на локальной машине выполнить команду
```commandline
python manage.py runserver
```
После чего по появившейся ссылке можно открыть проект:
http://127.0.0.1:8000/

### Создание суперпользователя

В файле .env задать значение пароля для суперпользователя SUPER_USER_PASSWORD
и имя SUPER_USER_NAME

Выполнить команду
```commandline
python manage.py create_super_user
```

Для входа в админку использовать имя и пароль, 
который указали в переменных SUPER_USER_NAME и SUPER_USER_PASSWORD


### Тесты

Для проекта написаны тесты через APITestCase, покрытие тестами составило 91%

### Документация

Для проекта подготовлена документация на основе drf-yasg
Доступ к документации на локальном сервере по адресам:
http://127.0.0.1:8000/docs/ и http://127.0.0.1:8000/redoc/


